/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var geometry = /* color: #ffc82d */ee.Geometry.Polygon(
        [[[53.923520845171936, 36.78139255015745],
          [53.610410493609436, 36.78139255015745],
          [53.440122407671936, 36.851754089417945],
          [53.264341157671936, 36.834169768676325],
          [52.808408540484436, 36.72857896254165],
          [52.248105806109436, 36.640475550255076],
          [51.660337251421936, 36.60520593444552],
          [51.050596040484436, 36.72857896254165],
          [50.742978852984436, 36.8825169195784],
          [50.171689790484436, 37.39049443377897],
          [50.061826509234436, 37.407950014171966],
          [49.836606782671936, 37.451571174421225],
          [49.545469087359436, 37.47337222130909],
          [49.556455415484436, 37.35557107733418],
          [49.622373384234436, 37.154446470246384],
          [49.446592134234436, 36.948395548894304],
          [49.314756196734436, 36.7637920609859],
          [49.452085298296936, 36.58315423092755],
          [49.452085298296936, 36.33131981586004],
          [49.886045259234436, 36.25605309894958],
          [50.243100923296936, 36.10973997082704],
          [50.803403657671936, 35.83856381633427],
          [51.797666352984436, 35.28445645052741],
          [52.275571626421936, 35.149823605894895],
          [53.044614595171936, 35.25754774924168],
          [53.972959321734436, 35.776195324482615],
          [54.434385102984436, 36.194014240698685],
          [54.033384126421936, 36.829773056712284]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/**
 * ÙƒÙˆØ¯ GEE Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ù…ÙØµØ­Ù‘ÙØ­ Ù„Ø­Ù„ Ø®Ø·Ø£ SyntaxError
 */

// ----------------------------------------------------
// 1. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª ÙˆØ§Ù„Ø¬ÙŠÙˆÙ…ØªØ±ÙŠ
// ----------------------------------------------------
// âš™ï¸ Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
var YEAR = 2025;
var MONTH = 11

// ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø±
var START_DATE = ee.Date.fromYMD(YEAR, MONTH, 1);
var END_DATE = START_DATE.advance(1, 'month');

// ğŸŒ ØªØ­Ø¯ÙŠØ¯ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (ROI) - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¬ÙŠÙˆÙ…ØªØ±ÙŠ Ø§Ù„Ù…Ø±Ø³ÙˆÙ…
var roi = geometry; 
Map.centerObject(roi, 7);

// Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ LST Ù…Ù† ÙƒÙ„ÙÙ† Ø¥Ù„Ù‰ Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©
var scaleLST = function(image) {
  var lst_celsius = image.multiply(0.02).subtract(273.15).rename('LST_C');
  return lst_celsius.copyProperties(image, ['system:time_start']);
};

// ----------------------------------------------------
// 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù†ÙˆØ¹ (Float32)
// ----------------------------------------------------

// ğŸŒ¡ï¸ Ø£. Ù…Ø¹Ø§Ù„Ø¬Ø© RST Ùˆ LST (MODIS/MOD11A2)
var lst_collection_modis = ee.ImageCollection('MODIS/061/MOD11A2')
    .filterDate(START_DATE, END_DATE)
    .filterBounds(roi)
    .select('LST_Day_1km');

var lst_image_celsius = lst_collection_modis.map(scaleLST).mean().clip(roi);

// ØªØ³Ù…ÙŠØ© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù†ÙˆØ¹ Ø¥Ù„Ù‰ Float32
var rst_image = lst_image_celsius.rename('RST').toFloat(); 
var lst_image = lst_image_celsius.rename('LST').toFloat(); 
Map.addLayer(rst_image, {min: 20, max: 45, palette: ['blue', 'yellow', 'red']}, 'RST (C)');

// ğŸ’§ Ø¨. Ù…Ø¹Ø§Ù„Ø¬Ø© SMI (SMAP/SPL3SMP_E/005)
var smi_collection = ee.ImageCollection('NASA/SMAP/SPL3SMP_E/005')
    .filterDate(START_DATE, END_DATE)
    .filterBounds(roi)
    .select('soil_moisture_am');

// Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø±Ø·ÙˆØ¨Ø© Ø§Ù„ØªØ±Ø¨Ø© Ù„Ù„Ø´Ù‡Ø± ÙˆØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù†ÙˆØ¹ Ø¥Ù„Ù‰ Float32
var smi_image = smi_collection.mean().rename('SMI').clip(roi).toFloat(); 
Map.addLayer(smi_image, {min: 0, max: 0.5, palette: ['brown', 'green']}, 'SMI');

// ----------------------------------------------------
// 3. Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù†ÙØµÙ„ Ø¥Ù„Ù‰ Google Drive (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ù„Ù…Ø§Øª ØµØ±ÙŠØ­Ø©)
// ----------------------------------------------------

var folder_name = 'GEE_Separate_Exports';
var base_file_name = 'GEE_Data_' + YEAR + '_' + (MONTH < 10 ? '0' : '') + MONTH;

// ØªÙ… Ø¥Ø²Ø§Ù„Ø© ØªØ¹Ø±ÙŠÙ export_params ÙƒÙƒØ§Ø¦Ù† Ù…Ù†ÙØµÙ„

// 1. ØªØµØ¯ÙŠØ± RST
var file_name_rst = 'RST_' + base_file_name;
Export.image.toDrive({
    image: rst_image,
    description: file_name_rst,
    // ğŸ’¡ ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­: ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­
    folder: folder_name,
    scale: 1000,
    region: roi.bounds().getInfo(),
    maxPixels: 1e13
});
print("Ø¨Ø¯Ø£Øª Ù…Ù‡Ù…Ø© ØªØµØ¯ÙŠØ± RST: " + file_name_rst);

// 2. ØªØµØ¯ÙŠØ± LST
var file_name_lst = 'LST_' + base_file_name;
Export.image.toDrive({
    image: lst_image,
    description: file_name_lst,
    // ğŸ’¡ ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­: ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­
    folder: folder_name,
    scale: 1000,
    region: roi.bounds().getInfo(),
    maxPixels: 1e13
});
print("Ø¨Ø¯Ø£Øª Ù…Ù‡Ù…Ø© ØªØµØ¯ÙŠØ± LST: " + file_name_lst);

// 3. ØªØµØ¯ÙŠØ± SMI
var file_name_smi = 'SMI_' + base_file_name;
Export.image.toDrive({
    image: smi_image,
    description: file_name_smi,
    // ğŸ’¡ ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­: ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­
    folder: folder_name,
    scale: 1000,
    region: roi.bounds().getInfo(),
    maxPixels: 1e13
});
print("Ø¨Ø¯Ø£Øª Ù…Ù‡Ù…Ø© ØªØµØ¯ÙŠØ± SMI: " + file_name_smi);

print("\nØªÙ… Ø¥Ø·Ù„Ø§Ù‚ 3 Ù…Ù‡Ø§Ù… ØªØµØ¯ÙŠØ± Ù…Ù†ÙØµÙ„Ø©. ÙŠØ±Ø¬Ù‰ Ù…ØªØ§Ø¨Ø¹Ø© Ø¹Ù„Ø§Ù…Ø© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù‡Ø§Ù… (Tasks).");