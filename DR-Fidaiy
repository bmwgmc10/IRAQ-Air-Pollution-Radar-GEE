/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var geometry = /* color: #ffc82d */ee.Geometry.Polygon(
        [[[53.923520845171936, 36.78139255015745],
          [53.610410493609436, 36.78139255015745],
          [53.440122407671936, 36.851754089417945],
          [53.264341157671936, 36.834169768676325],
          [52.808408540484436, 36.72857896254165],
          [52.248105806109436, 36.640475550255076],
          [51.660337251421936, 36.60520593444552],
          [51.050596040484436, 36.72857896254165],
          [50.742978852984436, 36.8825169195784],
          [50.171689790484436, 37.39049443377897],
          [50.061826509234436, 37.407950014171966],
          [49.836606782671936, 37.451571174421225],
          [49.545469087359436, 37.47337222130909],
          [49.556455415484436, 37.35557107733418],
          [49.622373384234436, 37.154446470246384],
          [49.446592134234436, 36.948395548894304],
          [49.314756196734436, 36.7637920609859],
          [49.452085298296936, 36.58315423092755],
          [49.452085298296936, 36.33131981586004],
          [49.886045259234436, 36.25605309894958],
          [50.243100923296936, 36.10973997082704],
          [50.803403657671936, 35.83856381633427],
          [51.797666352984436, 35.28445645052741],
          [52.275571626421936, 35.149823605894895],
          [53.044614595171936, 35.25754774924168],
          [53.972959321734436, 35.776195324482615],
          [54.434385102984436, 36.194014240698685],
          [54.033384126421936, 36.829773056712284]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/**
 * GEE JavaScript Code Ø§Ù„Ù…ÙØ¹Ø¯Ù‘ÙÙ„ Ù„ØªØ­Ù…ÙŠÙ„ (RST, LST, SMI) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¬ÙŠÙˆÙ…ØªØ±ÙŠ Ø§Ù„Ù…Ø±Ø³ÙˆÙ…
 */

// âš™ï¸ Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
var YEAR = 2020;
var MONTH = 1;

// ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø±
var START_DATE = ee.Date.fromYMD(YEAR, MONTH, 1);
var END_DATE = START_DATE.advance(1, 'month');


// ----------------------------------------------------
// ğŸŒ ØªØ­Ø¯ÙŠØ¯ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (Geometry)
// âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: 'geometry' Ù‡Ùˆ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø´Ø¦Ù‡ GEE Ø¹Ù†Ø¯ Ø§Ù„Ø±Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
// ----------------------------------------------------
var roi = geometry; 
Map.centerObject(roi, 7); // ÙŠØ±ÙƒØ² Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙŠÙˆÙ…ØªØ±ÙŠ Ø§Ù„Ø°ÙŠ Ø±Ø³Ù…ØªÙ‡

// Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ LST Ù…Ù† ÙƒÙ„ÙÙ† Ø¥Ù„Ù‰ Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©
var scaleLST = function(image) {
  var lst_celsius = image.multiply(0.02).subtract(273.15).rename('LST_C');
  return lst_celsius.copyProperties(image, ['system:time_start']);
};


// ----------------------------------------------------
// ğŸŒ¡ï¸ 1. Ù…Ø¹Ø§Ù„Ø¬Ø© RST Ùˆ LST (MODIS/MOD11A2)
// ----------------------------------------------------

var lst_collection_modis = ee.ImageCollection('MODIS/061/MOD11A2')
    .filterDate(START_DATE, END_DATE)
    .filterBounds(roi)
    .select('LST_Day_1km');

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø· Ù„Ù„Ø´Ù‡Ø±
var lst_image_celsius = lst_collection_modis.map(scaleLST).mean().clip(roi);

// ØªØ³Ù…ÙŠØ© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
var rst_image = lst_image_celsius.rename('RST'); // Road Surface Temperature
var lst_image = lst_image_celsius.rename('LST'); // Land Surface Temperature
Map.addLayer(rst_image, {min: 20, max: 45, palette: ['blue', 'yellow', 'red']}, 'RST (C)');


// ----------------------------------------------------
// ğŸ’§ 2. Ù…Ø¹Ø§Ù„Ø¬Ø© SMI (SMAP/SPL3SMP_E/005)
// ----------------------------------------------------

var smi_collection = ee.ImageCollection('NASA/SMAP/SPL3SMP_E/005')
    .filterDate(START_DATE, END_DATE)
    .filterBounds(roi)
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ø±Ø·ÙˆØ¨Ø© Ø§Ù„ØªØ±Ø¨Ø© ØµØ¨Ø§Ø­Ø§Ù‹
    .select('soil_moisture_am'); 

// Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø±Ø·ÙˆØ¨Ø© Ø§Ù„ØªØ±Ø¨Ø© Ù„Ù„Ø´Ù‡Ø±
var smi_image = smi_collection.mean().rename('SMI').clip(roi);
Map.addLayer(smi_image, {min: 0, max: 0.5, palette: ['brown', 'green']}, 'SMI');


// ----------------------------------------------------
// ğŸ–¼ï¸ 3. ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØµØ¯ÙŠØ±
// ----------------------------------------------------

var output_image = rst_image.addBands(lst_image).addBands(smi_image);

// Ø£Ù…Ø± Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Google Drive
var file_name = 'GEE_Data_RST_LST_SMI_' + YEAR + '_' + (MONTH < 10 ? '0' : '') + MONTH;
var folder_name = 'GEE_Exports_Drawn_Geometry';

Export.image.toDrive({
    image: output_image,
    description: file_name,
    folder: folder_name,
    scale: 1000,
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… bounding box Ù„Ù„Ø¬ÙŠÙˆÙ…ØªØ±ÙŠ Ø§Ù„Ù…Ø±Ø³ÙˆÙ…
    region: roi.bounds().getInfo(), 
    maxPixels: 1e13
});

print("Ø¨Ø¯Ø£Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØµØ¯ÙŠØ±. ÙŠØ±Ø¬Ù‰ Ù…ØªØ§Ø¨Ø¹Ø© Ø¹Ù„Ø§Ù…Ø© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù‡Ø§Ù… (Tasks).");